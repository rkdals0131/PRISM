### **[Product Requirements Document]**

## PRISM (Point-cloud & RGB Integrated Sensing Module)

---

### **1. ν• μ¤„ μ”μ•½ (One-liner)**

**C++ κΈ°λ° κ³ μ„±λ¥ LiDAR-μΉ΄λ©”λΌ ν“¨μ „ μ—”μ§„**: Ouster OS1-32 λΌμ΄λ‹¤ ν¬μΈνΈλ¥Ό 96μ±„λ„λ΅ λ³΄κ°„ν•κ³  λ“€μ–Ό μΉ΄λ©”λΌ RGB μ •λ³΄λ¥Ό μµν•©ν•μ—¬, μ‹¤μ‹κ°„(20Hz, <50ms λ μ΄ν„΄μ‹)μΌλ΅ κ³ λ°€λ„ μ»¬λ¬ ν¬μΈνΈν΄λΌμ°λ“λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

### **2. ν•µμ‹¬ λ©ν‘ (Core Objective)**

- **κ°€μ¥ λΉ λ¥΄κ³ , κ°€μ¥ μ•μ •μ μ΄λ©°, κ°€μ¥ μ΄μ΄ν• μ»¬λ¬ ν¬μΈνΈν΄λΌμ°λ“λ¥Ό μ‹μ¤ν…μ λ‹¤λ¥Έ λ…Έλ“μ— μ κ³µν•λ” κ²ƒ.**
- κΈ°μ΅΄ `FILC`μ μ•„μ΄λ””μ–΄λ¥Ό κ³„μΉ λ° ν™•μ¥ν•μ—¬, μ‹μ¤ν…μ λ¨λ“  λ…Έλ“κ°€ μ‹ λΆ°ν•κ³  μ‚¬μ©ν•  μ μλ” **'μ‚°μ—…μ© λ“±κΈ‰(Production-Grade)'μ ν¬μΈνΈν΄λΌμ°λ“ κ°•ν™”(Enhancement) ν¨ν‚¤μ§€**λ¥Ό κ°λ°ν•©λ‹λ‹¤.

### **3. κΈ°μ  μ•„ν‚¤ν…μ² λ° μ–Έμ–΄**

- **μ–Έμ–΄: C++**
  - **μ„ νƒ μ΄μ :** μ‹¤μ‹κ°„ λ°μ΄ν„° λ™κΈ°ν™”, λ‹¤μμ ν–‰λ ¬ μ—°μ‚° λ“± μ„±λ¥μ΄ κ°€μ¥ μ¤‘μ”ν• μ €μμ¤€ λ°μ΄ν„° μ²λ¦¬λ¥Ό λ‹΄λ‹Ήν•λ―€λ΅, C++κ³Ό Eigen λΌμ΄λΈλ¬λ¦¬λ¥Ό ν†µν•΄ μµκ³ μ μ„±λ¥μ„ λ³΄μ¥ν•©λ‹λ‹¤.
- **ν•νƒ: ROS 2 λ…Έλ“**
  - λ…λ¦½μ μΈ λ…Έλ“λ΅ λ™μ‘ν•λ©°, μ›λ³Έ μ„Όμ„ λ°μ΄ν„°λ¥Ό μ…λ ¥λ°›μ•„ μ²λ¦¬ ν›„, μ •μ λ 'Rich Point Cloud'λ¥Ό ν† ν”½μΌλ΅ λ°ν–‰ν•©λ‹λ‹¤.

### **4. μ…/μ¶λ ¥ (Inputs & Outputs)**

- **κµ¬λ… (Inputs):**
  1.  `λΌμ΄λ‹¤ μ›λ³Έ λ°μ΄ν„°`: `/ouster/points` (`sensor_msgs/msg/PointCloud2`) - 32μ±„λ„, 20Hz
  2.  `μΉ΄λ©”λΌ 1 μ›λ³Έ μ΄λ―Έμ§€`: `/usb_cam_1/image_raw/uncompressed` (`sensor_msgs/msg/Image`) - 640x360, 30Hz
  3.  `μΉ΄λ©”λΌ 2 μ›λ³Έ μ΄λ―Έμ§€`: `/usb_cam_2/image_raw/uncompressed` (`sensor_msgs/msg/Image`) - 640x360, 30Hz
  4.  `μΊλ¦¬λΈλ μ΄μ… νλΌλ―Έν„°`: CALICO ν•μ‹ YAML νμΌμ—μ„ λ΅λ“
      - `multi_camera_intrinsic_calibration.yaml`: μΉ΄λ©”λΌ λ‚΄λ¶€ νλΌλ―Έν„° (K matrix, distortion coeffs)
      - `multi_camera_extrinsic_calibration.yaml`: λΌμ΄λ‹¤-μΉ΄λ©”λΌ κ°„ μ™Έλ¶€ λ³€ν™ ν–‰λ ¬ (4x4 transformation matrix) 

- **λ°ν–‰ (Outputs):**
  1.  **`κ³ ν’μ§ μµν•© λ°μ΄ν„°` (`/ouster/points/colored`):**
      - **λ©”μ‹μ§€ νƒ€μ…:** `sensor_msgs/msg/PointCloud2`
      - **λ‚΄μ©:** `[x, y, z, intensity, r, g, b]` κµ¬μ΅°λ¥Ό κ°€μ§„ κ³ λ°€λ„ μ»¬λ¬ ν¬μΈνΈν΄λΌμ°λ“. κΈ°μ΅΄ PointCloud2 ν¬λ§·μ— RGB ν•„λ“λ¥Ό μ¶”κ°€ν•μ—¬ λ°ν–‰ν•©λ‹λ‹¤.
      - **μ£ΌκΈ°:** 20Hz (λΌμ΄λ‹¤ μ…λ ¥κ³Ό λ™κΈ°ν™”)

### **5. ν•µμ‹¬ κΈ°λ¥ λ° λ‹¨κ³„λ³„ κµ¬ν„ κ³„ν**

1.  **μ‹¤μ‹κ°„ λ°μ΄ν„° λ™κΈ°ν™” (Time Synchronization)**
    - `message_filters` λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ λΌμ΄λ‹¤μ™€ μΉ΄λ©”λΌ ν† ν”½μ νƒ€μ„μ¤νƒ¬ν”„λ¥Ό λ‚λ…Έμ΄(ns) λ‹¨μ„κΉμ§€ μ •ν™•ν•κ² λ™κΈ°ν™”ν•©λ‹λ‹¤.

2.  **κ³ μ„±λ¥ μΆν‘ λ³€ν™ (High-Performance Transformation)**
    - μ‚¬μ „ μΊλ¦¬λΈλ μ΄μ…λ extrinsic λ³€ν™ ν–‰λ ¬κ³Ό `Eigen` λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ λΌμ΄λ‹¤ μΆν‘κ³„μ λ¨λ“  ν¬μΈνΈλ¥Ό κ° μΉ΄λ©”λΌ μΆν‘κ³„λ΅ μ‹¤μ‹κ°„ λ³€ν™ν•©λ‹λ‹¤.
    - CALICOμ—μ„ μ κ³µν•λ” 4x4 λ³€ν™ ν–‰λ ¬μ„ μ§μ ‘ μ μ©ν•μ—¬ tf2 μμ΅΄μ„± μ—†μ΄ κ³ μ† μ²λ¦¬κ°€ κ°€λ¥ν•©λ‹λ‹¤.

3.  **`FILC` μ±„λ„ λ³΄κ°„ κΈ°λ¥ λ‚΄μ¥ (Channel Interpolation)**
    - κΈ°μ΅΄μ— κµ¬ν„λ `FILC` μ•κ³ λ¦¬μ¦(improved_interpolation_node.cpp)μ„ C++ ν—¤λ” ν•νƒλ΅ PRISM ν”„λ΅μ νΈμ— ν†µν•©ν•©λ‹λ‹¤.
    - Catmull-Rom νλΉ… λ³΄κ°„μ„ μ‚¬μ©ν•μ—¬ μ›λ³Έ 32μ±„λ„ λ°μ΄ν„°λ¥Ό 96μ±„λ„(3λ°°)μ μ΄μ΄ν• λ°μ΄ν„°λ΅ λ³΄κ°„ν•©λ‹λ‹¤.
    - OS1-32 κ³ λ„κ° μ •λ³΄λ¥Ό ν™μ©ν• μ •λ°€ν• λ³΄κ°„μΌλ΅ ν¬μΈνΈν΄λΌμ°λ“ λ°€λ„λ¥Ό ν¨κ³Όμ μΌλ΅ μ¦κ°€μ‹ν‚µλ‹λ‹¤.

4.  **ν¬μΈνΈν΄λΌμ°λ“ μ»¬λ¬ν™” (Point Cloud Colorization)**
    - λ³΄κ°„μ„ ν†µν•΄ λ°€λ„κ°€ λ†’μ•„μ§„ ν¬μΈνΈν΄λΌμ°λ“λ¥Ό λ‘ μΉ΄λ©”λΌ μ΄λ―Έμ§€ ν‰λ©΄μ— ν¬μν•©λ‹λ‹¤.
    - κ° ν¬μΈνΈμ— ν•΄λ‹Ήν•λ” ν”½μ…€ μΆν‘μ—μ„ μ„λΈν”½μ…€ μ •λ°€λ„λ΅ RGB κ°’μ„ μ¶”μ¶ν•©λ‹λ‹¤.
    - λ©€ν‹° μΉ΄λ©”λΌ μµν•©: λ‘ μΉ΄λ©”λΌμ—μ„ λ¨λ‘ λ³΄μ΄λ” ν¬μΈνΈλ” κ±°λ¦¬ κΈ°λ° κ°€μ¤‘μΉ λΈ”λ λ”©μ„ μ μ©ν•©λ‹λ‹¤.
    - ν”„λ¬μ¤ν…€ μ»¬λ§κ³Ό μ¤ν΄λ£¨μ „ μ²λ¦¬λ΅ μ ν¨ν• ν¬μΈνΈλ§ μ»¬λ¬ν™”ν•©λ‹λ‹¤.

5.  **μ „μ© ν† ν”½ λ°ν–‰ (Publisher)**
    - μ„ λ¨λ“  κ³Όμ •μ„ κ±°μ³ μ™„μ„±λ μµμΆ… κ²°κ³Όλ¬Ό, μ¦‰ κ³ λ°€λ„ μ»¬λ¬ ν¬μΈνΈν΄λΌμ°λ“λ¥Ό `/ouster/points/colored` ν† ν”½μ— λ°ν–‰ν•©λ‹λ‹¤.


### **6. μƒμ„Έ κ°λ° λ…μ„Έ (Detailed Technical Specifications)**

μ΄ μ„Ήμ…μ€ PRISM ν¨ν‚¤μ§€μ κµ¬μ²΄μ μΈ κΈ°μ  κµ¬ν„ μ‚¬ν•­μ„ λ¬Έμ„ν™”ν•©λ‹λ‹¤. κ° λ¬Έμ„λ” ν”„λ΅λ•μ… λ λ²¨μ C++ κµ¬ν„μ„ μ„ν• μƒμ„Έν• κ°€μ΄λ“λ¥Ό μ κ³µν•©λ‹λ‹¤.

#### **κΈ°μ  λ¬Έμ„ λ©λ΅**

1. **[μ‹μ¤ν… μ•„ν‚¤ν…μ²](./architecture.md)**
   - μ „μ²΄ μ‹μ¤ν… κµ¬μ΅° λ° μ»΄ν¬λ„νΈ λ‹¤μ΄μ–΄κ·Έλ¨
   - λ°μ΄ν„° ν”λ΅μ° μ„¤κ³„
   - λ¨λ“λ³„ μƒμ„Έ μ„¤κ³„ λ° μΈν„°νμ΄μ¤ λ…μ„Έ
   - μ„±λ¥ μµμ ν™” κ³„ν λ° κ°λ° λ΅λ“λ§µ

2. **[ν¨ν‚¤μ§€ κµ¬μ΅° κ°€μ΄λ“](./package_structure.md)**
   - λ””λ ‰ν† λ¦¬ κµ¬μ΅° λ° λ¨λ“ μ±…μ„
   - ν—¤λ” νμΌ μ•„ν‚¤ν…μ²μ™€ μμ΅΄μ„± κ΄€λ¦¬
   - CMakeLists.txt κµ¬μ„± λ° λΉλ“ μ‹μ¤ν…
   - ν…μ¤ν… ν”„λ μ„μ›ν¬ μ„¤μ •

3. **[λ³΄κ°„ λ΅μ§ ν†µν•© κ°€μ΄λ“](./interpolation_integration.md)**
   - FILC λ³΄κ°„ μ•κ³ λ¦¬μ¦ λ¶„μ„ λ° ν†µν•© μ „λµ
   - OS1-32 λΉ” κ³ λ„κ° μ²λ¦¬
   - SIMD μµμ ν™” λ° λ²΅ν„°ν™”
   - λ©”λ¨λ¦¬ ν¨μ¨μ  λ³΄κ°„ νμ΄ν”„λΌμΈ

4. **[ν¬μ λ° μ»¬λ¬ λ§¤ν•‘ κ°€μ΄λ“](./projection_color_mapping.md)**
   - μΉ΄λ©”λΌ-λΌμ΄λ‹¤ μΆν‘ λ³€ν™
   - 3Dβ†’2D ν¬μ μ•κ³ λ¦¬μ¦
   - RGB μ¶”μ¶ λ° μ„λΈν”½μ…€ λ³΄κ°„
   - λ©€ν‹° μΉ΄λ©”λΌ μµν•© μ „λµ

5. **[μ„±λ¥ μµμ ν™” κ°€μ΄λ“](./performance_optimization.md)**
   - TBB κΈ°λ° λ©€ν‹°μ¤λ λ”© μ•„ν‚¤ν…μ²
   - λ©”λ¨λ¦¬ ν’€ κ΄€λ¦¬ λ° μ λ΅μΉ΄ν”Ό μ „λµ
   - SIMD λ²΅ν„°ν™” λ° μΊμ‹ μµμ ν™”
   - μ‹¤μ‹κ°„ μ μ•½ λ° λ μ΄ν„΄μ‹ κ΄€λ¦¬

### **7. κΈ°λ€ ν¨κ³Ό λ° κ°€μΉ μ μ•**

- μ΄ ν¨ν‚¤μ§€λ§ λ…λ¦½μ μΌλ΅ μ‹¤ν–‰ν•΄λ„, RVizμ—μ„ `/ouster/points/colored` ν† ν”½μ„ κµ¬λ…ν•λ” κ²ƒλ§μΌλ΅ μ£Όλ³€ ν™κ²½μ΄ μ»¬λ¬ν’€ν• 3D ν¬μΈνΈν΄λΌμ°λ“λ΅ λ λ”λ§λλ”, κ·Έ μμ²΄λ΅ λ§¤μ° κ°•λ ¥ν• μ‹κ°ν™” λ° λ””λ²„κΉ… ν΄μ΄ λ©λ‹λ‹¤.
- ν›„μ† κ°λ°λ  λ¨λ“  μΈμ§€/νλ‹¨ μ•κ³ λ¦¬μ¦(HELIOS, FRONTIER λ“±)μ κ°λ° λ³µμ΅λ„λ¥Ό λ‚®μ¶”κ³ , μ„±λ¥μ κΈ°λ°μ„ λ‹¤μ§€λ” ν•µμ‹¬μ μΈ μ—­ν• μ„ μν–‰ν•©λ‹λ‹¤.

---

## **8. κ°μ„  μ μ•μ‚¬ν•­ (Enhancement Suggestions)**

### **μ„±λ¥ λ° ν™•μ¥μ„± κ°μ„ **

1. **λ‹¤μ¤‘ μΉ΄λ©”λΌ μ§€μ›** (νκΈ°λ¨. μ¤μ§ 2κ°μ μΉ΄λ©”λΌλ§ μ§€μ›ν•λ©΄ λ¨.)

2. **μΊλ¦¬λΈλ μ΄μ… λ° μ™κ³΅ μ²λ¦¬** (κµ³μ΄? ν›„μμ„ κµ¬ν„)
   - μΉ΄λ©”λΌ μ™κ³΅ λ³΄μ • νμ΄ν”„λΌμΈ (`image_geometry` ν™μ©)
   - μ •λ¥λ μ΄λ―Έμ§€ μ‚¬μ© μ—¬λ¶€ λ…μ‹
   - μ¨λΌμΈ μΊλ¦¬λΈλ μ΄μ… κ²€μ¦ λ©”μ»¤λ‹μ¦

3. **λ°μ΄ν„° μµμ ν™” λ° μ„±λ¥ μμ‚°**
   - **μ„±λ¥ λ©ν‘:** 
     - μ…λ ¥ λ μ΄νΈ: 20Hz (λΌμ΄λ‹¤), 30Hz (μΉ΄λ©”λΌ)
     - λ©ν‘ μ§€μ—°: < 50ms
   - **μµμ ν™” μ „λµ:**
     - Voxel λ‹¤μ΄μƒν”λ§ μµμ… (0.05m κ·Έλ¦¬λ“)
     - ROI κΈ°λ° μ„ νƒμ  μ²λ¦¬
     - PointCloud2 μ••μ¶• μ „μ†΅ (PCL μ••μ¶• λΌμ΄λΈλ¬λ¦¬)
     - QoS μ„¤μ •: Best Effort, Durability Volatile

4. **RGB ν•„λ“ μƒμ„Έ λ…μ„Έ**
   - RGB ν¨ν‚Ή ν•μ‹: `rgb` float32 λλ” `r,g,b` uint8
   - μƒ‰μƒ μ—†λ” ν¬μΈνΈ μ²λ¦¬: κΈ°λ³Έκ°’ (128, 128, 128) λλ” μ κ±°
   - frame_id μΌκ΄€μ„± λ³΄μ¥

5. **μμ™Έ μ²λ¦¬ λ° ν΄λ°±**
   - μ‹μ•Ό μ™Έ/ν›„λ°© ν¬μΈνΈ μ²λ¦¬ μ •μ±…
   - μΉ΄λ©”λΌ λ°μ΄ν„° λ„λ½ μ‹ λ™μ‘ λ¨λ“
   - λ™κΈ°ν™” μ‹¤ν¨ μ‹ λ³µκµ¬ λ©”μ»¤λ‹μ¦

### **KPI λ° μμ© κΈ°μ¤€**
- μ»¬λ¬ν™” μ •ν™•λ„: 95% μ΄μƒ ν¬μΈνΈ μ •ν™•ν• RGB λ§¤μΉ­
- μ²λ¦¬ μ§€μ—°: ν‰κ·  30ms, μµλ€ 50ms
- λ°μ΄ν„° μ™„μ „μ„±: μ…λ ¥ ν¬μΈνΈμ 98% μ΄μƒ μ²λ¦¬
- λ©”λ¨λ¦¬ μ‚¬μ©λ‰: < 2GB

### **κµ¬ν„ μ°μ„ μμ„ λ° κ°λ° λ΅λ“λ§µ**

#### **κµ¬ν„ μƒνƒ λ²”λ΅€**
- π”΄ **TODO**: λ―Έμ°©μ
- π΅ **IN_PROGRESS**: μ§„ν–‰μ¤‘  
- πΆ **DONE**: μ™„λ£
- π”µ **TESTING**: ν…μ¤νΈμ¤‘
- β **OPTIONAL**: μ„ νƒμ‚¬ν•­

---

## **1. Phase 0: ν”„λ΅μ νΈ κΈ°λ° κµ¬μ¶• (Week 0-1)** πΆ

### **1.1. ν¨ν‚¤μ§€ κµ¬μ΅° μ„¤μ •** πΆ
#### **1.1.1. λ””λ ‰ν† λ¦¬ κµ¬μ΅° μƒμ„±** πΆ
- **μƒνƒ**: DONE
- **μ‚°μ¶λ¬Ό**: 
  - `include/prism/` ν—¤λ” λ””λ ‰ν† λ¦¬
  - `src/` μ†μ¤ λ””λ ‰ν† λ¦¬
  - `config/` μ„¤μ • νμΌ λ””λ ‰ν† λ¦¬
  - `launch/` λ°μΉ νμΌ λ””λ ‰ν† λ¦¬
  - `test/` ν…μ¤νΈ λ””λ ‰ν† λ¦¬

#### **1.1.2. CMakeLists.txt κµ¬μ„±** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 2μ‹κ°„
- **κµ¬ν„ λ‚΄μ©**:
  ```cmake
  - ROS2 ν¨ν‚¤μ§€ μμ΅΄μ„± μ„¤μ • (rclcpp, sensor_msgs, cv_bridge)
  - μ™Έλ¶€ λΌμ΄λΈλ¬λ¦¬ μ—°κ²° (Eigen3, OpenCV, PCL, TBB)
  - μ»΄νμΌ μµμ… μ„¤μ • (-O3, -march=native, -fopenmp)
  - μ„¤μΉ κ·μΉ™ μ •μ
  ```

#### **1.1.3. package.xml μ‘μ„±** π”΄
- **μƒνƒ**: TODO  
- **μμƒ μ‹κ°„**: 1μ‹κ°„
- **μμ΅΄μ„± λ…μ‹**:
  - λΉλ“ μμ΅΄μ„±: eigen3, libopencv-dev, libpcl-all-dev, libtbb-dev
  - μ‹¤ν–‰ μμ΅΄μ„±: sensor_msgs, geometry_msgs, std_msgs

### **1.2. κ°λ° ν™κ²½ μ„¤μ •** π”΄
#### **1.2.1. λ„μ»¤ ν™κ²½ κµ¬μ„±** β
- **μƒνƒ**: OPTIONAL
- **κµ¬ν„ λ‚΄μ©**: μ¬ν„ κ°€λ¥ν• λΉλ“ ν™κ²½μ„ μ„ν• Dockerfile

#### **1.2.2. CI/CD νμ΄ν”„λΌμΈ** β
- **μƒνƒ**: OPTIONAL
- **κµ¬ν„ λ‚΄μ©**: GitHub Actions λλ” GitLab CI μ„¤μ •

---

## **2. Phase 1: μ½”μ–΄ μΈν”„λΌ κµ¬ν„ (Week 1-2)** π”΄

### **2.1. λ©”λ¨λ¦¬ κ΄€λ¦¬ μ‹μ¤ν…** π”΄
#### **2.1.1. PointCloudSoA λ°μ΄ν„° κµ¬μ΅°** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **κµ¬ν„ νμΌ**: `include/prism/core/PointCloudTypes.hpp`
- **ν•µμ‹¬ κµ¬ν„**:
  ```cpp
  - Structure-of-Arrays λ μ΄μ•„μ›ƒ
  - SIMD μ •λ ¬ λ³΄μ¥ (32λ°”μ΄νΈ κ²½κ³„)
  - μ»¤μ¤ν…€ ν• λ‹Ήμ μ§€μ›
  ```

#### **2.1.2. λ©”λ¨λ¦¬ ν’€ κµ¬ν„** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 6μ‹κ°„
- **κµ¬ν„ νμΌ**: `include/prism/performance/MemoryPool.hpp`
- **ν•µμ‹¬ κΈ°λ¥**:
  - a. κ³ μ • ν¬κΈ° λΈ”λ΅ ν’€
  - b. Lock-free ν• λ‹Ή/ν•΄μ 
  - c. NUMA μΈμ‹ ν• λ‹Ή
  - d. ν†µκ³„ μμ§‘ κΈ°λ¥

### **2.2. μΊλ¦¬λΈλ μ΄μ… κ΄€λ¦¬μ** π”΄
#### **2.2.1. YAML νμ„ κµ¬ν„** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 3μ‹κ°„
- **κµ¬ν„ νμΌ**: `src/calibration_manager.cpp`
- **κΈ°λ¥ λ…μ„Έ**:
  - CALICO ν•μ‹ νΈν™μ„± 100%
  - λ°νƒ€μ„ μ¬λ΅λ“ μ§€μ›
  - κ²€μ¦ λ° μ—λ¬ ν•Έλ“¤λ§

#### **2.2.2. λ³€ν™ ν–‰λ ¬ μΊμ‹±** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 2μ‹κ°„
- **μµμ ν™”**: Eigen μ •λ ¬ ν–‰λ ¬ μ‚¬μ©

### **2.3. μ‹¤ν–‰ λ¨λ“ κ΄€λ¦¬μ** π”΄
#### **2.3.1. ExecutionMode μΈν„°νμ΄μ¤** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **κµ¬ν„ νμΌ**: `include/prism/performance/ExecutionMode.hpp`
- **λ¨λ“ κµ¬ν„**:
  - a. SingleThreadPipeline (λ””λ²„κ·Έμ©)
  - b. CPUParallelPipeline (TBB)
  - c. GPUPipeline (CUDA/OpenCV)
  - d. AUTO λ¨λ“ μ„ νƒ λ΅μ§

---

## **3. Phase 2: λ³΄κ°„ μ—”μ§„ κµ¬ν„ (Week 2-3)** π”΄

### **3.1. κΈ°λ³Έ λ³΄κ°„ μ•κ³ λ¦¬μ¦** π”΄
#### **3.1.1. FILC λ΅μ§ ν¬ν…** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 8μ‹κ°„
- **κµ¬ν„ νμΌ**: `src/interpolation_engine.cpp`
- **μ†μ¤ μ°Έμ΅°**: `filc/src/improved_interpolation_node.cpp`
- **ν•µμ‹¬ κµ¬ν„**:
  - a. OS1-32 κ³ λ„κ° ν…μ΄λΈ”
  - b. Catmull-Rom μ¤ν”λΌμΈ κµ¬ν„
  - c. λ¶μ—°μ†μ„± κ°μ§€ μ•κ³ λ¦¬μ¦

#### **3.1.2. μ‹±κΈ€μ¤λ λ“ κµ¬ν„** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **κ²€μ¦ λ°©λ²•**: 
  - FILC μ›λ³Έκ³Ό μ¶λ ¥ λΉ„κµ
  - ν¬μΈνΈ λ°€λ„ μ¦κ°€μ¨ κ²€μ¦ (3λ°°)

### **3.2. μµμ ν™”λ λ³΄κ°„** π”΄
#### **3.2.1. SIMD λ²΅ν„°ν™”** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 6μ‹κ°„
- **κµ¬ν„ λ‚΄μ©**:
  - a. AVX2 intrinsics μ‚¬μ©
    - 8κ° ν¬μΈνΈ λ™μ‹ μ²λ¦¬
    - μν‰ μ—°μ‚° μµμ†ν™”
  - b. AVX-512 μ§€μ› (μ„ νƒμ )
  - c. λ°νƒ€μ„ CPU κΈ°λ¥ κ°μ§€

#### **3.2.2. λ³‘λ ¬ μ²λ¦¬** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **κµ¬ν„ λ°©μ‹**:
  - TBB parallel_forλ΅ μ±„λ„λ³„ λ³‘λ ¬ν™”
  - μΊμ‹ λΌμΈ κ³ λ ¤ν• μ‘μ—… λ¶„ν• 

### **3.3. GPU λ³΄κ°„ (μ„ νƒμ )** β
#### **3.3.1. CUDA μ»¤λ„ κµ¬ν„** β
- **μƒνƒ**: OPTIONAL
- **μμƒ μ‹κ°„**: 8μ‹κ°„
- **μ„κ³„κ°’**: 50,000 ν¬μΈνΈ μ΄μƒμ—μ„ ν™μ„±ν™”

---

## **4. Phase 3: ν¬μ μ—”μ§„ κµ¬ν„ (Week 3-4)** π”΄

### **4.1. κΈ°λ³Έ ν¬μ νμ΄ν”„λΌμΈ** π”΄
#### **4.1.1. 3D-2D ν¬μ κµ¬ν„** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 6μ‹κ°„
- **κµ¬ν„ νμΌ**: `src/projection_engine.cpp`
- **μ°Έμ΅° μ½”λ“**: `calico/src/utils/projection_utils.cpp`
- **ν•µμ‹¬ λ΅μ§**:
  - a. μ™Έλ¶€ λ³€ν™ μ μ© (4x4 ν–‰λ ¬)
  - b. λ‚΄λ¶€ νλΌλ―Έν„° μ μ© (K ν–‰λ ¬)
  - c. μ™κ³΅ λ³΄μ • (5 νλΌλ―Έν„°)

#### **4.1.2. ν”„λ¬μ¤ν…€ μ»¬λ§** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 3μ‹κ°„
- **μµμ ν™”**: 
  - μ΅°κΈ° μΆ…λ£ μ΅°κ±΄
  - AABB κΈ°λ° μ‚¬μ „ ν•„ν„°λ§

### **4.2. λ“€μ–Ό μΉ΄λ©”λΌ λ³‘λ ¬ ν¬μ** π”΄
#### **4.2.1. λ™μ‹ ν¬μ κµ¬ν„** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **κµ¬ν„ λ°©μ‹**:
  - a. std::asyncλ΅ λΉ„λ™κΈ° μ‹¤ν–‰
  - b. κ²°κ³Ό λ™κΈ°ν™” λ° λ³‘ν•©

#### **4.2.2. μ ν¨μ„± κ²€μ¦** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 2μ‹κ°„
- **κ²€μ¦ ν•­λ©**:
  - μ΄λ―Έμ§€ κ²½κ³„ μ²΄ν¬
  - κΉμ΄ κ°’ κ²€μ¦ (z > 0)
  - μ¤ν΄λ£¨μ „ μ²λ¦¬

### **4.3. GPU ν¬μ κ°€μ†** β
#### **4.3.1. OpenCV GPU ν™μ©** β
- **μƒνƒ**: OPTIONAL
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **κµ¬ν„ λ‚΄μ©**:
  - cv::cuda::projectPoints ν™μ©
  - λ°°μΉ μ²λ¦¬ μµμ ν™”

#### **4.3.2. CUDA μ»¤λ„ κµ¬ν„** β
- **μƒνƒ**: OPTIONAL
- **μμƒ μ‹κ°„**: 8μ‹κ°„
- **μµμ ν™”**:
  - κ³µμ  λ©”λ¨λ¦¬ ν™μ©
  - Warp λ λ²¨ μµμ ν™”

---

## **5. Phase 4: μƒ‰μƒ μ¶”μ¶ λ° μµν•© (Week 4-5)** π”΄

### **5.1. μƒ‰μƒ μƒν”λ§** π”΄
#### **5.1.1. μ„λΈν”½μ…€ λ³΄κ°„** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **κµ¬ν„ νμΌ**: `src/color_extraction_engine.cpp`
- **λ³΄κ°„ λ°©μ‹**:
  - a. Bilinear (κΈ°λ³Έ)
  - b. Bicubic (κ³ ν’μ§)
  - c. Nearest (κ³ μ†)

#### **5.1.2. λ°°μΉ μƒ‰μƒ μ¶”μ¶** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 3μ‹κ°„
- **μµμ ν™”**:
  - μΊμ‹ μΉν™”μ  μ ‘κ·Ό ν¨ν„΄
  - ν”„λ¦¬νμΉ­ ννΈ

### **5.2. λ©€ν‹° μΉ΄λ©”λΌ μµν•©** π”΄
#### **5.2.1. κ°€μ¤‘μΉ κ³„μ‚°** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **κ°€μ¤‘μΉ μ”μ†**:
  - a. ν¬μ κ±°λ¦¬ (μ¤‘μ‹¬λ¶€ μ°μ„ )
  - b. μ…μ‚¬κ° (μ •λ©΄ μ°μ„ )
  - c. μ‹ λΆ°λ„ μ μ

#### **5.2.2. μƒ‰μƒ λΈ”λ λ”©** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 3μ‹κ°„
- **λΈ”λ λ”© λ¨λ“**:
  - a. κ°€μ¤‘ ν‰κ· 
  - b. μµλ€ μ‹ λΆ°λ„ μ„ νƒ
  - c. μ¤‘μ•™κ°’ ν•„ν„°λ§

### **5.3. GPU μƒ‰μƒ μ²λ¦¬** β
#### **5.3.1. ν…μ¤μ² λ©”λ¨λ¦¬ ν™μ©** β
- **μƒνƒ**: OPTIONAL
- **μμƒ μ‹κ°„**: 6μ‹κ°„
- **μµμ ν™”**: ν•λ“μ›¨μ–΄ λ³΄κ°„ ν™μ©

---

## **6. Phase 5: μ‹μ¤ν… ν†µν•© (Week 5-6)** π”΄

### **6.1. ROS2 λ…Έλ“ κµ¬ν„** π”΄
#### **6.1.1. λ©”μ‹μ§€ ν•Έλ“¤λ¬** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **κµ¬ν„ νμΌ**: `src/prism_node.cpp`
- **κµ¬λ… ν† ν”½**:
  - `/ouster/points` (20Hz)
  - `/usb_cam_1/image_raw/uncompressed` (30Hz)
  - `/usb_cam_2/image_raw/uncompressed` (30Hz)

#### **6.1.2. μ‹κ°„ λ™κΈ°ν™”** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 6μ‹κ°„
- **κµ¬ν„ λ°©μ‹**:
  - a. message_filters::TimeSynchronizer
  - b. μ μ‘ν• λ²„νΌλ§
  - c. νƒ€μ„μ¤νƒ¬ν”„ λ³΄μ •

#### **6.1.3. λ°ν–‰μ κµ¬ν„** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 2μ‹κ°„
- **λ°ν–‰ ν† ν”½**: `/ouster/points/colored`
- **QoS μ„¤μ •**: Best Effort, Volatile

### **6.2. λ°μΉ νμΌ μ‘μ„±** π”΄
#### **6.2.1. κΈ°λ³Έ λ°μΉ νμΌ** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 2μ‹κ°„
- **κµ¬ν„ νμΌ**: `launch/prism.launch.py`

#### **6.2.2. νλΌλ―Έν„° μ„¤μ •** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 2μ‹κ°„
- **μ„¤μ • νμΌ**: `config/prism_params.yaml`

---

## **7. Phase 6: μ„±λ¥ μµμ ν™” (Week 6-7)** π”΄

### **7.1. ν”„λ΅νμΌλ§ λ° λ¶„μ„** π”΄
#### **7.1.1. μ„±λ¥ μΈ΅μ • λ„κµ¬** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **λ„κµ¬ κµ¬ν„**:
  - a. μ¤ν…μ΄μ§€λ³„ νƒ€μ΄λ°
  - b. λ©”λ¨λ¦¬ μ‚¬μ©λ‰ μ¶”μ 
  - c. μΊμ‹ λ―Έμ¤μ¨ μΈ΅μ •

#### **7.1.2. λ³‘λ© μ§€μ  μ‹λ³„** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **λ¶„μ„ λ„κµ¬**:
  - perf
  - VTune
  - nvprof (GPU)

### **7.2. μµμ ν™” κµ¬ν„** π”΄
#### **7.2.1. μΊμ‹ μµμ ν™”** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 6μ‹κ°„
- **κΈ°λ²•**:
  - a. λ°μ΄ν„° κµ¬μ΅° ν¨λ”©
  - b. λ£¨ν”„ νƒ€μΌλ§
  - c. ν”„λ¦¬νμΉ­

#### **7.2.2. λ³‘λ ¬ν™” νλ‹** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **μ΅°μ • ν•­λ©**:
  - μ¤λ λ“ μ
  - μ‘μ—… λ¶„ν•  ν¬κΈ°
  - μ¤μΌ€μ¤„λ§ μ •μ±…

### **7.3. μ μ‘ν• ν’μ§ μ μ–΄** π”΄
#### **7.3.1. λ™μ  ν’μ§ μ΅°μ •** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 6μ‹κ°„
- **μ΅°μ • νλΌλ―Έν„°**:
  - a. λ³΄κ°„ λ°€λ„ (1x/2x/3x)
  - b. μƒ‰μƒ λ³΄κ°„ ν’μ§
  - c. μ²λ¦¬ μμ—­ μ ν•

#### **7.3.2. λ μ΄ν„΄μ‹ λ¨λ‹ν„°λ§** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 3μ‹κ°„
- **λ¨λ‹ν„°λ§ μ§€ν‘**:
  - ν‰κ· /μµλ€ λ μ΄ν„΄μ‹
  - ν”„λ μ„ λ“λ΅­μ¨
  - CPU/GPU μ‚¬μ©λ¥ 

---

## **8. Phase 7: ν…μ¤νΈ λ° κ²€μ¦ (Week 7-8)** π”΄

### **8.1. λ‹¨μ„ ν…μ¤νΈ** π”΄
#### **8.1.1. λ³΄κ°„ ν…μ¤νΈ** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **ν…μ¤νΈ ν•­λ©**:
  - a. μ •ν™•λ„ κ²€μ¦
  - b. κ²½κ³„ μ΅°κ±΄
  - c. μ„±λ¥ λ²¤μΉλ§ν¬

#### **8.1.2. ν¬μ ν…μ¤νΈ** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **ν…μ¤νΈ ν•­λ©**:
  - a. ν¬μ μ •ν™•λ„
  - b. μ™κ³΅ λ³΄μ • κ²€μ¦
  - c. ν”„λ¬μ¤ν…€ μ»¬λ§

#### **8.1.3. μµν•© ν…μ¤νΈ** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **ν…μ¤νΈ ν•­λ©**:
  - a. μƒ‰μƒ μ •ν™•λ„
  - b. λΈ”λ λ”© ν’μ§
  - c. μ—£μ§€ μΌ€μ΄μ¤

### **8.2. ν†µν•© ν…μ¤νΈ** π”΄
#### **8.2.1. End-to-End ν…μ¤νΈ** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 6μ‹κ°„
- **ν…μ¤νΈ μ‹λ‚λ¦¬μ¤**:
  - a. μ •μƒ λ™μ‘
  - b. μ„Όμ„ λ„λ½
  - c. λ™κΈ°ν™” μ‹¤ν¨

#### **8.2.2. μ„±λ¥ κ²€μ¦** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **κ²€μ¦ κΈ°μ¤€**:
  - λ μ΄ν„΄μ‹ < 50ms
  - CPU μ‚¬μ©λ¥  < 30%
  - λ©”λ¨λ¦¬ < 2GB

### **8.3. μ‹μ¤ν… ν…μ¤νΈ** π”΄
#### **8.3.1. RViz μ‹κ°ν™”** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 2μ‹κ°„
- **κ²€μ¦ ν•­λ©**: μ»¬λ¬ ν¬μΈνΈν΄λΌμ°λ“ λ λ”λ§

#### **8.3.2. Rosbag μ¬μƒ ν…μ¤νΈ** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„
- **ν…μ¤νΈ λ°μ΄ν„°**: λ‹¤μ–‘ν• ν™κ²½ μ΅°κ±΄

---

## **9. Phase 8: λ¬Έμ„ν™” λ° λ°°ν¬ (Week 8)** πΆ

### **9.1. κΈ°μ  λ¬Έμ„** πΆ
#### **9.1.1. μ•„ν‚¤ν…μ² λ¬Έμ„** πΆ
- **μƒνƒ**: DONE
- **μ‚°μ¶λ¬Ό**: `docs/architecture.md`

#### **9.1.2. API λ νΌλ°μ¤** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 6μ‹κ°„
- **λ„κµ¬**: Doxygen

### **9.2. μ‚¬μ©μ λ¬Έμ„** π”΄
#### **9.2.1. μ„¤μΉ κ°€μ΄λ“** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 2μ‹κ°„

#### **9.2.2. μ‚¬μ© λ§¤λ‰΄μ–Ό** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 4μ‹κ°„

### **9.3. λ°°ν¬ μ¤€λΉ„** π”΄
#### **9.3.1. λ¦΄λ¦¬μ¦ ν¨ν‚¤μ§•** π”΄
- **μƒνƒ**: TODO
- **μμƒ μ‹κ°„**: 2μ‹κ°„

#### **9.3.2. λ²„μ „ νƒκΉ…** π”΄
- **μƒνƒ**: TODO
- **λ²„μ „**: v1.0.0

---

## **μμ΅΄μ„± κ΄€κ³„ λ‹¤μ΄μ–΄κ·Έλ¨**

```
Phase 0 (κΈ°λ°κµ¬μ¶•)
    β†“
Phase 1 (μ½”μ–΄μΈν”„λΌ) β”€β”€β†’ Phase 2 (λ³΄κ°„μ—”μ§„)
    β†“                         β†“
Phase 3 (ν¬μμ—”μ§„) β†β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
    β†“
Phase 4 (μƒ‰μƒμµν•©)
    β†“
Phase 5 (μ‹μ¤ν…ν†µν•©)
    β†“
Phase 6 (μ„±λ¥μµμ ν™”)
    β†“
Phase 7 (ν…μ¤νΈκ²€μ¦)
    β†“
Phase 8 (λ¬Έμ„ν™”λ°°ν¬)
```

---

## **λ¦¬μ¤ν¬ λ° λ€μ‘ λ°©μ•**

### **κΈ°μ μ  λ¦¬μ¤ν¬**
1. **λ μ΄ν„΄μ‹ λ©ν‘ λ―Έλ‹¬μ„±**
   - λ€μ‘: μ μ‘ν• ν’μ§ μ μ–΄λ΅ λ™μ  μ΅°μ •
   - ν΄λ°±: μ‹±κΈ€μ¤λ λ“ λ¨λ“λ΅ λ””λ²„κΉ…

2. **GPU λ©”λ¨λ¦¬ λ¶€μ΅±**
   - λ€μ‘: μ¤νΈλ¦¬λ° μ²λ¦¬ κµ¬ν„
   - ν΄λ°±: CPU μ²λ¦¬λ΅ μλ™ μ „ν™

3. **μ„Όμ„ λ™κΈ°ν™” μ‹¤ν¨**
   - λ€μ‘: μ μ‘ν• λ²„νΌ ν¬κΈ° μ΅°μ •
   - ν΄λ°±: μµκ·Όμ ‘ νƒ€μ„μ¤νƒ¬ν”„ λ§¤μΉ­

### **μΌμ • λ¦¬μ¤ν¬**
1. **CUDA κ°λ° μ§€μ—°**
   - λ€μ‘: OpenCV GPUλ΅ μ°μ„  κµ¬ν„
   - ν΄λ°±: CPU SIMD μµμ ν™” μ§‘μ¤‘

2. **ν…μ¤νΈ λ°μ΄ν„° λ¶€μ΅±**
   - λ€μ‘: μ‹λ®¬λ μ΄μ… λ°μ΄ν„° μƒμ„±
   - ν΄λ°±: λ‹¨μ„ ν…μ¤νΈ κ°•ν™”

---

## **μ„±κ³µ μ§€ν‘ (KPI)**

### **ν•„μ λ‹¬μ„± λ©ν‘**
- β… μ²λ¦¬ λ μ΄ν„΄μ‹: < 50ms (95 percentile)
- β… CPU μ‚¬μ©λ¥ : < 30% (ν‰κ· )
- β… λ©”λ¨λ¦¬ μ‚¬μ©λ‰: < 2GB
- β… ν¬μΈνΈ μ²λ¦¬μ¨: > 98%
- β… μƒ‰μƒ μ •ν™•λ„: > 95%

### **μ¶”κ°€ λ©ν‘**
- β­ GPU κ°€μ† μ‹ 10λ°° μ„±λ¥ ν–¥μƒ
- β­ 100,000 ν¬μΈνΈ/ν”„λ μ„ μ²λ¦¬ κ°€λ¥
- β­ μ‹¤μ‹κ°„ νλΌλ―Έν„° μ΅°μ • μ§€μ›